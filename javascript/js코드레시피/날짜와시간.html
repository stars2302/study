<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /* ------------ 현재 날짜 불러오기(연,월,일 ...) ---------------- */

    // 0. const date = new Date();
    // 현재의.. 요일 월 일 연도 시간 시간기준 (나라 표준시)
    // 날짜 관련 함수는 new Date()의 객체를 함께 사용
    // 새로고침 할때마다 바뀜.!
    const date = new Date();
    console.log(date); //Sat Dec 09 2023 13:00:44 GMT+0900 (한국 표준시)


    // 1. new Date().getFullYear();
    // 현재 연도를 숫자로 반환
    console.log(new Date().getFullYear()); //2023
    console.log(typeof(new Date().getFullYear())); //number


    // 2. new Date().getMonth();
    // 현재 월을 숫자로 반환
    console.log(new Date().getMonth()); //11 (현재 12월)
    console.log(typeof(new Date().getMonth())); //number

    // 2-1. getMonth만 인덱스 번호임. 그래서 +1로 가공 후 사용하자
    console.log(new Date().getMonth()+1); //12 (현재 12월)


    // 3. new Date().getDate();
    // 현재 일을 숫자로 반환
    console.log(new Date().getDate()); //9
    console.log(typeof(new Date().getDate())); //number


    // 4. new Date().getHours();
    // 현재 시를 숫자로 반환
    console.log(new Date().getHours()); //17(현재 오후 5시)
    console.log(typeof(new Date().getHours())); //number
    

    // 5. new Date().getMinutes();
    // 현재 분을 숫자로 반환
    console.log(new Date().getMinutes()); //9(현재 9분)
    console.log(typeof(new Date().getMinutes())); //number


    // 6. new Date().getSeconds();
    // 현재 초를 숫자로 반환
    console.log(new Date().getSeconds()); //43(현재 43초)
    console.log(typeof(new Date().getSeconds())); //number


    // 7. new Date().getMilliseconds();
    // 현재 밀리초를 숫자로 반환
    console.log(new Date().getMilliseconds()); //458(현재 458ms)
    console.log(typeof(new Date().getMilliseconds())); //number


    // 8. new Date().getDay();
    // 현재 요일을 숫자로 반환. 0(일요일) ~ 6(토요일)
    console.log(new Date().getDay()); //6(현재 토요일)
    console.log(typeof(new Date().getDay())); //number
    /* -------------------------------------------------------- */
  </script>

  <h2>실시간 시계</h2>
  <p id="newDate"><span class="year"></span>년 <span class="month"></span>월 <span class="date"></span>일 <span class="day"></span> <span class="hours"></span> <span class="hour"></span>시 <span class="minute"></span>분 <span class="second"></span>초</p>
  <script>
    const date2 = document.querySelector('#newDate');
    setInterval(()=>{
      const date3 = new Date();
      date2.querySelector('.year').innerText = date3.getFullYear();
      date2.querySelector('.month').innerText = date3.getMonth()+1;
      date2.querySelector('.date').innerText = date3.getDate();
      const days = ['일요일','월요일','화요일','수요일','목요일','금요일','토요일'];
      date2.querySelector('.day').innerText = days[date3.getDay()];

      if(date3.getHours() < 12) {
        date2.querySelector('.hour').innerText = date3.getHours().toString().padStart(2, '0');
        date2.querySelector('.hours').innerText = '오전'
      } else {
        let hour = date3.getHours()-12
        date2.querySelector('.hour').innerText = hour.toString().padStart(2, '0');
        date2.querySelector('.hours').innerText = '오후'
      }
      date2.querySelector('.minute').innerText = date3.getMinutes().toString().padStart(2, '0');
      date2.querySelector('.second').innerText = date3.getSeconds().toString().padStart(2, '0');
    },1000);
    /* -------------------------------------------------------- */



    /* ----------- 현재 날짜 형식다르게 불러오기 ----------------- */
    // 1. new Date();
    // Sat Dec 09 2023 17:40:41 GMT+0900 (한국 표준시)
    console.log(new Date());

    // 2. new Date().toLocaleString
    // 2023. 12. 9. 오후 5:43:02
    console.log(new Date().toLocaleString());

    // 2-1. new Date().toLocaleDateString()  - 날짜
    // 2023. 12. 9.
    console.log(new Date().toLocaleDateString());
  
    // 2-2. new Date().toLocaleTimeStrinig()  - 시간
    // 오후 5:42:35
    console.log(new Date().toLocaleTimeString());
    /* -------------------------------------------------------- */



    /* ----------------- 타임스탬프 확인 ---------------------- */

    // 0. 타임스탬프 : 1970년 1월 1일 00:00:00부터 현재까지의 밀리초

    // 1. Date.parse(날짜);
    // 1-1. 문자열로 날짜 입력(하이픈 입력)
    console.log(Date.parse('2022-12-12')); //1670803200000  -  오전 9시 기준
    console.log(Date.parse('2022/12/12')); //1670770800000  -  오전 00시 기준
    console.log(Date.parse('2022.12.12'));//1670770800000
    console.log(Date.parse('2022. 12. 12'))//1670770800000
    console.log(Date.parse('2022,12,12'))//1670770800000
    
    //잘못된 예시
    console.log(Date.parse('22.12.12'))//NaN
    console.log(Date.parse('2022년12월12일'));//NaN

    // 1-2. 숫자로 날짜 입력(월 일 연도)
    console.log(Date.parse('12 12 2022'));//1670770800000
    /* -------------------------------------------------------- */



    /* ----------------- 원하는 시간 설정 ---------------------- */

    // 1. new Date(날짜)
    // 1-1. 문자열로 설정
    const date3 = new Date('2022/12/12 00:00:00');
    const date4 = new Date('Dec 12 2022');

    // 1-2. 숫자로 설정 (연, 월-1, 일, 시, 분, 초, 밀리초)
    const date5 = new Date(2022, 11, 12, 0, 0, 0);

    // 1-3. 타임스탬프 값으로 설정
    const date6 = new Date(1670770800000);

    // 1-4. 결과값
    console.log(`date3 : ${date3.toLocaleDateString()}, date4 : ${date4.toLocaleDateString()}, date5 : ${date5.toLocaleDateString()}, date6 : ${date6.toLocaleDateString()}`)
    //date3 : 2022. 12. 12., date4 : 2022. 12. 12., date5 : 2022. 12. 12., date6 : 2022. 12. 12.


    // 2. setXXX(날짜) 함수 사용
    const date7 = new Date();
    date7.setFullYear(2022); //연도 설정
    date7.setMonth(11); //월 설정 (원하는 달-1)
    date7.setDate(12); //일 설정
    date7.setHours(12); //시 설정
    date7.setMinutes(12); //분 설정
    date7.setSeconds(12); //초 설정
    date7.setMilliseconds(3); //밀리초 설정

    console.log(date7.toLocaleString()); //2022. 12. 12. 오후 12:12:12
    /* -------------------------------------------------------- */



    /* ----------------- 원하는 날짜 계산하기 ---------------------- */

    //원하는 날짜를 정의하고
    const date8 = new Date('2023/12/10');
    
    // 1개월 전
    date8.setMonth(date8.getMonth() - 1);
    console.log(date8.toLocaleString()); //2023. 11. 10. 오전 12:00:00

    // 100일 후
    date8.setDate(date8.getDate() + 100);
    console.log(date8.toLocaleString()); //2024. 2. 18. 오전 12:00:00
    /* -------------------------------------------------------- */



    /* ----------------- 두 날짜의 차이구하기 ---------------------- */

    // 0. 원리
    // 두 날짜의 밀리초 차이를 계산하고 일수, 시, 분 차이를 계산.
    const dateA = new Date('1998/01/16');
    const dateB = new Date('2001/11/27');

    // 1. 일수 차이
    // (최신날짜.getTime() - 오래날짜.getTime()) / (24 * 60 * 60 * 1000)
    console.log((dateB.getTime() - dateA.getTime()) / (24 * 60 * 60 * 1000)); //1411


    // 2. 시 차이
    // (최신날짜.getTime() - 오래날짜.getTime()) / (60 * 60 * 1000)
    console.log((dateB.getTime() - dateA.getTime()) / (60 * 60 * 1000)); //33864


    // 3. 분 차이
    // (최신날짜.getTime() - 오래날짜.getTime()) / (60 * 1000)
    console.log((dateB.getTime() - dateA.getTime()) / (60 * 1000)); //2031840
    /* -------------------------------------------------------- */


    /* -------------- 현재시간 밀리초로 가져오기 --------------- */
    
    // 1. Date.now();
    // 현재시간을 밀리초로 가져옴
    console.log(Date.now()); //1702273944387
    </script>
  <hr>
  <h2>새로고침 후 경과된 시간</h2>
  <p><span class="date_now">0</span>초</p>
  <script>
    
    // 2. 활용
    // 새로고침 후 ~ 현재까지의 경고ㅏ된 시간
    
    const oldTime = Date.now(); // 새로고침 후 밀리초
    setInterval(()=>{
      const currentTime = Date.now(); // 1초마다 바뀌는 현재시간
      const diff = Math.floor((currentTime - oldTime) / 1000); //밀리초 -> 초
      document.querySelector('.date_now').innerText = diff;
    },1000);
  </script>
  <hr>
  <h2>카운트다운</h2>
  <p id="container"><span class="count_down">10</span>초 남았습니다.</p>
  <script>
    let total_count = 10; //10초
    const oldTime2 = Date.now(); //새로고침 후 밀리초

    const countDownInterval = setInterval(() => {
      const crtTime = Date.now(); //1초마다 계산되는 현재시간
      const diff2 = Math.floor((crtTime - oldTime2) / 1000); //차이를 초로 환산
      const countDown = total_count - diff2; //설정한 10초에서 차이값을 뺌.
      if(countDown >= 0){
        document.querySelector('.count_down').innerText = countDown;
      } else {
        document.querySelector('#container').innerText = 'Boom'; //0초 이하
        clearInterval(countDownInterval); //clear 해주기! (실화면에선 반응하지 않아도 브라우저 내에서 계속 작동하고 있기때문.)
      }
      console.log(diff2);
    }, 1000);
  </script>
</body>
</html>